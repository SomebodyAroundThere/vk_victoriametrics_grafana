# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–∞ –±–∞–∑–µ VictoriaMetrics

1. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ vk-cloud
–î–ª—è –∑–∞–¥–∞–Ω–∏—è –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã: —Å–µ—Ç—å, —Ä–æ—É—Ç–µ—Ä, –ø–æ–¥—Å–µ—Ç—å, –∏–Ω—Å—Ç–∞–Ω—Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã Ubuntu22.04 (—Ä–∞–∑–º–µ—Ä –¥–∏—Å–∫–∞ 20GB , —Ç–∏–ø –¥–∏—Å–∫–∞ ceph-ssd). 

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/somebodyaroundthere/vk_victoriametrics_grafana.git
cd vk_victoriametrics_grafana
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–∏–∑–º–µ–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–º –Ω—É–∂–Ω—ã –≤ —Ñ–∞–π–ª–∞—Ö secret.tfvars –∏ variables.tf

### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Terraform
terraform init

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–ª–∞–Ω–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
terraform plan -var-file="secret.tfvars"

# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
terraform apply -var-file="secret.tfvars"
```
### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–î–∞–ª–µ–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑ –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ victoriametrics, —Å–ª–µ–¥—É–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ (https://docs.victoriametrics.com/victoriametrics/quick-start/ ), –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –≤ —Ñ–∞–π–ª–µ —Å–µ—Ä–≤–∏—Å–∞ –ø—É—Ç—å –¥–æ —Ñ–∞–π–ª–∞ –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫.
–°–æ–¥–µ—Ä–∂–∏–º–æ–µ scrape.yaml:
scrape_configs:
- job_name: node-exporter
  static_configs:
  - targets:
    - localhost:9100
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Grafana –∏ node-exporter –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏(https://arenda-server.cloud/blog/monitoring-bez-oblaka-s-victoriametrics-grafana-ljogkaja-alternativa/).
–î–æ–±–∞–≤–ª—è–µ–º –≤ grafana data source - prometheus, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –Ω–∞ http://localhost:8428 (victoriametrics), –Ω–∞ –µ–≥–æ –æ—Å–Ω–æ–≤–µ —Å–æ–∑–¥–∞–µ–º dashboard.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
mysql-database-terraform/
‚îú‚îÄ‚îÄ main.tf                 # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Terraform
‚îú‚îÄ‚îÄ variables.tf            # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ provider.tf             # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ VK Cloud
‚îú‚îÄ‚îÄ network.tf              # –°–∫—Ä–∏–ø—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ë–î —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```
